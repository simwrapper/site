import{d as p,n as h,g as _,q as f}from"./index-24c2379b.js";import{y as z}from"./index-719eff74.js";import{l as F}from"./lodash-ce477bae.js";import{g as R}from"./util-8430d78c.js";import{F as P}from"./FileSelector-7d478347.js";import{H as A}from"./HTTPFileSystem-017e7593.js";import{W as L}from"./DashboardDataManager-9bea9fc4.js";import{O as I,P as N,S as o,g as O}from"./ColorsAndWidths-1801eb2f.js";import{a as j,d as S}from"./index-83bc819c.js";import{L as T}from"./LegendBox-11257845.js";const U=p({name:"AddDatasetsPanel",components:{FileSelector:P},props:{fileSystem:{type:Object,required:!0},subfolder:{type:String,required:!0},vizConfiguration:{type:Object}},data:()=>({validDataTypes:["CSV","TSV","TAB","TXT","DBF","GZ","DAT"],validRegex:/\.(CSV|TSV|TAB|TXT|DBF|DAT)(\.GZ)?$/,fileChoice:"",filesInFolder:[],isLoading:!1}),computed:{fileApi(){return new A(this.fileSystem)}},async mounted(){const{files:s}=await this.fileApi.getDirectory(this.subfolder);this.filesInFolder=s.filter(e=>this.validRegex.test(e.toLocaleUpperCase())).sort()},watch:{fileChoice(){console.warn("*** File Chosen!"),this.fileChoiceChanged(this.fileChoice)}},methods:{clickedClose(){this.$emit("update",{})},async fileChoiceChanged(s){if(!s)return;this.isLoading=!0;const e=await this.fetchDataset(s);let t=s;const a=this.validRegex.exec(s.toLocaleUpperCase());a&&a[0]&&(t=s.substring(0,s.length-a[0].length));const i={key:t,dataTable:e,filename:s};this.$emit("update",{dataset:i}),this.isLoading=!1},handleFilesValidated(s,e){console.log("Validated result",s)},async handleFilesChanged(s){this.isLoading=!0;const e=Array.from(s);for(const t of e){let a=await this.loadDataUrl(t);const i=a.buffer||a,l=await this.processBuffer(t.name,i),{comments:r,...m}=l;let c=t.name;const u=this.validRegex.exec(c.toLocaleUpperCase());u&&u[0]&&(c=c.substring(0,c.length-u[0].length));const C={key:c,dataTable:m,filename:t};this.$emit("update",{dataset:C})}this.isLoading=!1},async processBuffer(s,e){return new Promise((t,a)=>{const i=new L;try{i.postMessage({config:{dataset:s},buffer:e},[e]),i.onmessage=l=>{i.terminate(),t(l.data)}}catch(l){i.terminate(),a(l)}})},async loadDataUrl(s){return await new Promise(t=>{const a=new FileReader;a.readAsArrayBuffer(s),a.onload=i=>{const l=i.target.result,r=R(l);t(r)}})},async fetchDataset(s){return new Promise((e,t)=>{const a=new L;try{a.postMessage({fileSystemConfig:this.fileSystem,subfolder:this.subfolder,files:this.filesInFolder,config:{dataset:s}}),a.onmessage=i=>{a.terminate(),e(i.data)}}catch(i){a.terminate(),t(i)}})}}});var q=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"datasets-panel"},[e.isLoading?t("div",{staticClass:"loading-panel"},[e._m(0)]):e._e(),t("h3",{staticClass:"button-close",on:{click:e.clickedClose}},[t("i",{staticClass:"fa fa-sm fa-times"})]),t("h3",{staticClass:"header-line"},[e._v("Add Data")]),t("div",{staticClass:"widgets"},[t("div",{staticClass:"widget"},[t("b",[e._v("Choose a dataset from files in this folder:")]),t("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:e.fileChoice,callback:function(a){e.fileChoice=a},expression:"fileChoice"}},[t("option",{attrs:{value:"",label:"Select file..."}}),e._l(e.filesInFolder,function(a){return t("option",{attrs:{label:a},domProps:{value:a}})})],2)],1)]),t("br"),t("div",{staticClass:"drop-zone"},[t("b",[e._v("Or Drag and Drop any dataset file:")]),t("file-selector",{attrs:{"accept-extensions":e.validDataTypes.map(a=>`.${a}`).join(","),multiple:!0,"is-loading":e.isLoading},on:{validated:e.handleFilesValidated,changed:e.handleFilesChanged}},[e._v("or "),t("b",[t("a",[e._v("browse your files")])]),t("div",{staticClass:"section-top",attrs:{slot:"top"},slot:"top"},[t("br"),t("p",[e._v("Drop files into this area.")]),t("p",[e._v("No size limit, but large datasets could crash your browser :-)")]),t("br"),t("p",[e._v("Supported file types: "),t("b",[e._v(e._s(e.validDataTypes.join(", ")))])])]),t("div",{staticClass:"section-bottom",attrs:{slot:"loader"},slot:"loader"},[t("p",[t("b",[e._v("Processing files"),t("br")])]),t("p",[t("i",[e._v("Please wait...")])])])]),t("br"),e._m(1)],1)])},W=[function(){var s=this,e=s._self._c;return s._self._setupProxy,e("div",{staticClass:"thing"},[e("div",{staticClass:"spinner-box"},[e("p",[s._v(" ")])]),e("h3",[s._v("LOADING...")])])},function(){var s=this,e=s._self._c;return s._self._setupProxy,e("p",{staticClass:"center"},[e("input",{staticStyle:{display:"none"},attrs:{name:"dataBrowser",id:"dataBrowser",type:"file"}})])}];var E=h(U,q,W,!1,null,"89b31fda",null,null);const M=E.exports,y=Object.assign({},I,N),H=p({name:"ColorsConfig",props:{vizConfiguration:{type:Object,required:!0},datasets:{type:Object,required:!0}},data:()=>{const s=[{ramp:"Viridis",style:2,reverse:!0},{ramp:"Plasma",style:2,reverse:!0},{ramp:"Blues",style:2},{ramp:"Purples",style:2},{ramp:"Oranges",style:2},{ramp:"PRGn",style:1,reverse:!0},{ramp:"RdBu",style:1,reverse:!0},{ramp:"Tableau10",style:0},{ramp:"Paired",style:0}];return{colorChoices:s,globalState:_.state,steps:"9",flip:!1,dataColumn:"",selectedColor:s[0],selectedSingleColor:"",datasetLabels:[],isFirstDataset:!0}},computed:{simpleColors(){return this.buildColors({ramp:"Tableau10",style:0},10)}},mounted(){this.selectedSingleColor=this.simpleColors[0],this.datasetLabels=Object.keys(this.vizConfiguration.datasets),this.datasetsAreLoaded()},watch:{vizConfiguration(){this.vizConfigChanged()},datasets(){this.datasetsAreLoaded()},flip(){this.emitColorSpecification()},steps(){this.emitColorSpecification()},dataColumn(){this.emitColorSpecification()},"global.isDarkMode"(){this.emitColorSpecification()}},methods:{vizConfigChanged(){var e;const s=(e=this.vizConfiguration.display)==null?void 0:e.color;if(s!=null&&s.columnName){const t=`${s.dataset}/${s.columnName}`;this.dataColumn=t,this.datasetLabels=[...this.datasetLabels]}},datasetsAreLoaded(){const s=Object.keys(this.datasets);if(this.datasetLabels=s,!this.isFirstDataset)return;s.length&&(this.isFirstDataset=!1);const{dataset:e,columnName:t,colorRamp:a}=this.vizConfiguration.display.color;if(e&&t)this.dataColumn=`${e}/${t}`,a&&(this.selectedColor=this.colorChoices.find(i=>i.ramp.toLowerCase()===a.ramp.toLowerCase())||this.colorChoices[0],this.flip=!!a.reverse,a.steps&&(this.steps=""+a.steps));else if(s.length){const i=Object.keys(this.datasets[s[0]])[1];console.log(i),i&&(this.dataColumn=`${s[0]}/${i}`)}},emitColorSpecification(){if(!this.dataColumn)return;const s=this.dataColumn.indexOf("/");if(s===-1){this.clickedSingleColor(this.selectedSingleColor);return}const e=this.dataColumn.substring(0,s),t=this.dataColumn.substring(s+1),a=this.buildColors(this.selectedColor,parseInt(this.steps)),i=parseInt(this.steps),l={dataset:e,columnName:t,fixedColors:a,colorRamp:{ramp:this.selectedColor.ramp,style:this.selectedColor.style,reverse:this.flip,steps:i}};setTimeout(()=>this.$emit("update",{color:l}),50)},clickedSingleColor(s){this.selectedSingleColor=s;const e={fixedColors:[this.selectedSingleColor],dataset:"",columnName:""};setTimeout(()=>this.$emit("update",{color:e}),50)},datasetChoices(){return this.datasetLabels.filter(s=>s!=="csvBase")},columnsInDataset(s){const e=this.datasets[s];return e?Object.keys(e).filter(a=>e[a].type!==f.LOOKUP):[]},pickColor(s){this.selectedColor=s,this.emitColorSpecification()},buildColors(s,e){let t=[...this.ramp(s,e||parseInt(this.steps))],a=!!s.reverse;return this.flip&&(a=!a),a&&(t=t.reverse()),s.style===2&&this.globalState.isDarkMode&&(t=t.reverse()),t},ramp(s,e){let t;if(s.style===0)return y[`scheme${s.ramp}`].slice(0,e);if(y[`scheme${s.ramp}`]&&y[`scheme${s.ramp}`][e])t=y[`scheme${s.ramp}`][e];else try{const a=y[`interpolate${s.ramp}`];t=[];for(let i=0;i<e;++i)t.push(y.rgb(a(i/(e-1))).hex())}catch{return this.ramp(s,e-1)}return t}}});var B=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"color-ramp-picker"},[t("div",{staticClass:"widgets"},[t("div",{staticClass:"widget"},[t("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:e.dataColumn,callback:function(a){e.dataColumn=a},expression:"dataColumn"}},[t("option",{attrs:{label:"Single color",value:""}}),e._l(e.datasetChoices(),function(a){return t("optgroup",{key:a,attrs:{label:a}},e._l(e.columnsInDataset(a),function(i){return t("option",{attrs:{label:i},domProps:{value:`${a}/${i}`}})}),0)})],2)],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.dataColumn,expression:"!dataColumn"}],staticClass:"colorbar single"},e._l(e.simpleColors,function(a){return t("div",{key:a,staticClass:"single-color",class:{active:e.selectedSingleColor==a},style:{backgroundColor:`${a}`},on:{click:function(i){return e.clickedSingleColor(a)}}})}),0),t("div",{directives:[{name:"show",rawName:"v-show",value:e.dataColumn,expression:"dataColumn"}],staticClass:"more"},[t("div",{staticClass:"widgets"},[t("div",{staticClass:"widget"},[t("p",[e._v("Steps")]),t("b-input",{attrs:{placeholder:"Number",type:"number",min:"2",max:"15"},model:{value:e.steps,callback:function(a){e.steps=a},expression:"steps"}})],1),t("div",{staticClass:"widget"},[t("p",[e._v("Reverse")]),t("b-checkbox",{staticClass:"hello",model:{value:e.flip,callback:function(a){e.flip=a},expression:"flip"}})],1)]),e._l(e.colorChoices,function(a){return t("div",{key:a.ramp,staticClass:"color-ramp",class:{active:a===e.selectedColor},on:{click:function(i){return e.pickColor(a)}}},[t("div",{staticClass:"colorbar"},e._l(e.buildColors(a),function(i,l){return t("div",{key:l,staticClass:"swatch",style:{backgroundColor:`${i}`}},[t("p",[e._v(" ")])])}),0)])})],2)])},V=[];var J=h(H,B,V,!1,null,"a6392fbd",null,null);const K=J.exports,G=p({name:"WidthConfig",props:{vizConfiguration:{type:Object,required:!0},datasets:{type:Object,required:!0}},data:s=>({dataColumn:"",xscaleFactor:"100",selectedTransform:["none","sqrt","pow5"][0],datasetLabels:[],debounceHandleWidthChanged:j(s.emitWidthSpecification,500)}),mounted(){this.datasetsAreLoaded()},computed:{datasetChoices(){return this.datasetLabels.filter(s=>s!=="csvBase")}},watch:{vizConfiguration(){this.vizConfigChanged()},datasets(){this.datasetsAreLoaded()},xscaleFactor(){this.debounceHandleWidthChanged()},dataColumn(){this.emitWidthSpecification()}},methods:{vizConfigChanged(){var e;const s=(e=this.vizConfiguration.display)==null?void 0:e.width;if(s!=null&&s.columnName){const t=`${s.dataset}/${s.columnName}`;this.dataColumn=t,this.datasetLabels=[...this.datasetLabels]}},datasetsAreLoaded(){const s=Object.keys(this.datasets),{dataset:e,columnName:t,scaleFactor:a}=this.vizConfiguration.display.width;if(e&&t)this.dataColumn=`${e}/${t}`,a&&(this.xscaleFactor=""+a);else if(s.length){const i=Object.keys(this.datasets[s[0]])[1];i&&(this.dataColumn=`${s[0]}/${i}`)}this.datasetLabels=s},emitWidthSpecification(){const s=this.dataColumn.indexOf("/");if(s===-1){this.clickedSingle();return}const e=this.dataColumn.substring(0,s),t=this.dataColumn.substring(s+1),a={dataset:e,columnName:t,scaleFactor:parseFloat(this.xscaleFactor)};setTimeout(()=>this.$emit("update",{width:a}),50)},clickedSingle(){const s={dataset:"",columnName:"",scaleFactor:parseFloat(this.xscaleFactor)};setTimeout(()=>this.$emit("update",{width:s}),50)},numericColumnsInDataset(s){const e=this.datasets[s];return e?Object.keys(e).filter(a=>e[a].type!==f.LOOKUP):[]}}});var Y=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"width-panel"},[t("div",{staticClass:"widgets"},[t("div",{staticClass:"widget"},[t("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:e.dataColumn,callback:function(a){e.dataColumn=a},expression:"dataColumn"}},[t("option",{attrs:{label:"None",value:""}}),e._l(e.datasetChoices,function(a){return t("optgroup",{key:a,attrs:{label:a}},e._l(e.numericColumnsInDataset(a),function(i){return t("option",{attrs:{label:i},domProps:{value:`${a}/${i}`}})}),0)})],2)],1)]),t("div",{staticClass:"widgets"},[t("div",{staticClass:"widget"},[t("p",[e._v("Scaling")]),t("b-field",[t("b-input",{attrs:{disabled:!e.dataColumn,placeholder:"1.0"},model:{value:e.xscaleFactor,callback:function(a){e.xscaleFactor=a},expression:"xscaleFactor"}})],1)],1)])])},X=[];var Z=h(G,Y,X,!1,null,"a340000a",null,null);const Q=Z.exports,ee=[{ramp:"Viridis",style:o.sequential,reverse:!0},{ramp:"Plasma",style:o.sequential,reverse:!0},{ramp:"Blues",style:o.sequential},{ramp:"Greens",style:o.sequential},{ramp:"Purples",style:o.sequential},{ramp:"Oranges",style:o.sequential},{ramp:"RdBu",style:o.diverging,reverse:!0},{ramp:"RdYlBu",style:o.sequential},{ramp:"PRGn",style:o.diverging,reverse:!0},{ramp:"Tableau10",style:o.categorical},{ramp:"Paired",style:o.categorical}],te=p({name:"LineColorsConfig",props:{vizConfiguration:{type:Object,required:!0},datasets:{type:Object,required:!0}},computed:{simpleColors(){return this.buildColors({ramp:"Tableau10",style:o.categorical},10)},colorChoices(){return ee},datasetChoices(){return this.datasetLabels.filter(s=>s!=="csvBase").reverse()}},data:()=>({globalState:_.state,dataColumn:"",datasetLabels:[],diffDatasets:[],diffRelative:!1,diffUISelection:"",diffChoices:[],emitColorSpecification:{},flip:!1,isCurrentlyDiffMode:!1,join:"",normalSelection:"",selectedColor:{},selectedSingleColor:"",steps:"9",useHardCodedColors:!1}),mounted(){var s,e;this.emitColorSpecification=S.debounce(this.emitColorSpecificationDebounced,150),this.selectedSingleColor=this.simpleColors[0],this.selectedColor=this.colorChoices[0],this.datasetLabels=Object.keys(this.vizConfiguration.datasets),this.datasetsAreLoaded(),(e=(s=this.vizConfiguration.display)==null?void 0:s.lineColor)!=null&&e.fixedColors&&(this.useHardCodedColors=!0),this.vizConfigChanged()},watch:{vizConfiguration(){this.vizConfigChanged()},datasets(){this.datasetsAreLoaded()},diffUISelection(){this.diffSelectionChanged()},dataColumn(){this.emitColorSpecification()},join(){this.emitColorSpecification()},diffDatasets(){this.emitColorSpecification()},flip(){this.emitColorSpecification()},"globalState.isDarkMode"(){this.emitColorSpecification()},normalSelection(){this.emitColorSpecification()},selectedColor(){this.emitColorSpecification()},steps(){this.emitColorSpecification()},diffRelative(){this.emitColorSpecification()}},methods:{vizConfigChanged(){var e;const s=(e=this.vizConfiguration.display)==null?void 0:e.lineColor;if(this.setupDiffMode(s),s!=null&&s.columnName){const t=this.diffDatasets.length?`${this.diffDatasets[0]}/${s.columnName}`:`${s.dataset}/${s.columnName}`;if(this.dataColumn=t,this.datasetLabels=[...this.datasetLabels],s!=null&&s.normalize&&(this.normalSelection=s.normalize),s!=null&&s.join&&(this.join=s.join),s.colorRamp){let a=this.colorChoices.find(i=>i.ramp==s.colorRamp.ramp)||this.colorChoices[0];this.selectedColor=a,this.steps=s.colorRamp.steps,this.flip=!!s.colorRamp.reverse}}else s!=null&&s.fixedColors&&this.clickedSingleColor(s.fixedColors[0])},setupDiffMode(s){if(!(s!=null&&s.diff))return;let e=[];if(s.diff.indexOf(" - ")>-1)e=s.diff.split(" - ").map(t=>t.trim());else if(e=s.diff.split("-").map(t=>t.trim()),e.length>2)throw Error('Ambiguous diff, use " - " to separate terms');this.diffDatasets=e,this.diffRelative=!!s.relative,this.diffUISelection=`${e[0]} - ${e[1]}`},datasetsAreLoaded(){const s=Object.keys(this.datasets);this.datasetLabels=s,this.updateDiffLabels()},updateDiffLabels(){const s=[];if(s.push(["No",""]),this.datasetLabels.length<=1)return;const e=this.datasetLabels.slice(1);let t=e.flatMap((a,i)=>e.slice(i+1).map(l=>a+" - "+l));t.forEach(a=>s.push([a,a])),e.reverse(),t=e.flatMap((a,i)=>e.slice(i+1).map(l=>a+" - "+l)),t.forEach(a=>s.push([a,a])),this.diffChoices=s},diffSelectionChanged(){if(this.diffUISelection){const s=this.diffUISelection.split(" - ");this.diffDatasets=s}else this.diffDatasets=[],this.diffRelative=!1;this.isCurrentlyDiffMode=!!this.diffUISelection},emitColorSpecificationDebounced(){var r,m,c,u,C,v,b,g;if(!this.dataColumn)return;if(this.dataColumn==="@"){this.normalSelection="",this.selectedSingleColor||(this.selectedSingleColor=this.simpleColors[0]),this.clickedSingleColor(this.selectedSingleColor);return}const s=this.dataColumn.indexOf("/"),e=this.dataColumn.substring(0,s),t=this.dataColumn.substring(s+1),a=parseInt(this.steps),i=this.useHardCodedColors?(m=(r=this.vizConfiguration.display)==null?void 0:r.lineColor)==null?void 0:m.fixedColors.slice():this.buildColors(this.selectedColor,a);this.useHardCodedColors=!1;const l={dataset:e,columnName:t,join:this.join,fixedColors:i,normalize:this.normalSelection,colorRamp:{ramp:this.selectedColor.ramp,style:this.selectedColor.style,reverse:this.flip,steps:a}};this.diffDatasets.length&&(l.diffDatasets=this.diffDatasets),this.diffRelative&&(l.relative=!0),(C=(u=(c=this.vizConfiguration.display)==null?void 0:c.lineColor)==null?void 0:u.colorRamp)!=null&&C.breakpoints&&(l.colorRamp.breakpoints=(g=(b=(v=this.vizConfiguration.display)==null?void 0:v.lineColor)==null?void 0:b.colorRamp)==null?void 0:g.breakpoints),this.$emit("update",{lineColor:l})},clickedSingleColor(s){this.selectedSingleColor=s;const e={fixedColors:[this.selectedSingleColor],dataset:"",columnName:"",normalize:""};this.$emit("update",{lineColor:e})},columnsInDataset(s){const e=this.datasets[s];return e?Object.keys(e).filter(a=>e[a].type!==f.LOOKUP):[]},pickColor(s){this.selectedColor=s,this.emitColorSpecification()},buildColors(s,e){let t=[...O(s,e||parseInt(this.steps))],a=!!s.reverse;return this.flip&&(a=!a),a&&(t=t.reverse()),s.style===o.sequential&&this.globalState.isDarkMode&&(t=t.reverse()),t}}});var se=function(){var a;var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"color-ramp-picker"},[t("div",{staticClass:"widgets"},[t("div",{staticClass:"widget"},[t("p",{staticClass:"tight"},[e._v("Display")]),t("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:e.dataColumn,callback:function(i){e.dataColumn=i},expression:"dataColumn"}},[t("option",{attrs:{label:"Single color",value:"@"}}),e._l(e.datasetChoices,function(i){return t("optgroup",{key:i,attrs:{label:i}},e._l(e.columnsInDataset(i),function(l){return t("option",{key:`${i}/${l}`,attrs:{label:l},domProps:{value:`${i}/${l}`}})}),0)})],2)],1)]),e.datasetChoices.length>1&&e.dataColumn&&e.dataColumn.length>1?t("div",{staticClass:"widgets"},[t("div",{staticClass:"widget"},[t("p",{staticClass:"tight"},[e._v("Join by")]),t("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:e.join,callback:function(i){e.join=i},expression:"join"}},[t("option",{attrs:{label:"None",value:""}}),t("option",{attrs:{label:"Row count",value:"@count"}}),t("optgroup",{attrs:{label:"Join by..."}},e._l(e.columnsInDataset(((a=e.dataColumn)==null?void 0:a.slice(0,e.dataColumn.indexOf("/")))||[]),function(i){return t("option",{attrs:{label:i},domProps:{value:i}})}),0)])],1)]):e._e(),e.dataColumn&&e.dataColumn.length>1?t("div",{staticClass:"widgets"},[t("div",{staticClass:"widget"},[t("p",{staticClass:"tight"},[e._v("Normalize by")]),t("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:e.normalSelection,callback:function(i){e.normalSelection=i},expression:"normalSelection"}},[t("option",{attrs:{label:"None",value:""}}),e._l(e.datasetChoices,function(i){return t("optgroup",{key:i,attrs:{label:i}},e._l(e.columnsInDataset(i),function(l){return t("option",{key:`${i}/${l}`,attrs:{label:l},domProps:{value:`${i}:${l}`}})}),0)})],2)],1)]):e._e(),t("div",{staticClass:"more",attrs:{title:e.diffChoices.length<2?"Add two datasets to enable comparisons":""}},[t("div",{staticClass:"widgets"},[t("div",{staticClass:"widget",staticStyle:{flex:"3"}},[t("p",{staticClass:"tight"},[e._v("Compare datasets")]),t("b-select",{staticClass:"selector",attrs:{disabled:!e.dataColumn||e.diffChoices.length<2,expanded:""},model:{value:e.diffUISelection,callback:function(i){e.diffUISelection=i},expression:"diffUISelection"}},e._l(e.diffChoices,function(i){return t("option",{attrs:{label:i[0]},domProps:{value:i[1]}})}),0)],1),t("div",{staticClass:"widget"},[t("p",[e._v("%Diff")]),t("b-checkbox",{staticClass:"hello",attrs:{disabled:!e.diffUISelection||!e.dataColumn||e.diffChoices.length<2},model:{value:e.diffRelative,callback:function(i){e.diffRelative=i},expression:"diffRelative"}})],1)])]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.dataColumn=="@",expression:"dataColumn=='@'"}],staticClass:"colorbar single"},e._l(e.simpleColors,function(i){return t("div",{key:i,staticClass:"single-color",class:{active:e.selectedSingleColor==i},style:{backgroundColor:`${i}`},on:{click:function(l){return e.clickedSingleColor(i)}}})}),0),t("div",{directives:[{name:"show",rawName:"v-show",value:e.dataColumn&&e.dataColumn.length>1,expression:"dataColumn && dataColumn.length > 1"}],staticClass:"more"},[t("div",{staticClass:"widgets"},[t("div",{staticClass:"widget",staticStyle:{flex:"3"}},[t("p",[e._v("Steps")]),t("b-input",{attrs:{placeholder:"Number",type:"number",min:"2",max:"15"},model:{value:e.steps,callback:function(i){e.steps=i},expression:"steps"}})],1),t("div",{staticClass:"widget"},[t("p",[e._v("Flip")]),t("b-checkbox",{staticClass:"hello",model:{value:e.flip,callback:function(i){e.flip=i},expression:"flip"}})],1)]),e._l(e.colorChoices,function(i){return t("div",{key:i.ramp,staticClass:"color-ramp",class:{active:i===e.selectedColor},on:{click:function(l){return e.pickColor(i)}}},[t("div",{staticClass:"colorbar"},e._l(e.buildColors(i),function(l,r){return t("div",{key:r,staticClass:"swatch",style:{backgroundColor:`${l}`}},[t("p",[e._v(" ")])])}),0)])})],2)])},ae=[];var ie=h(te,se,ae,!1,null,"278754a0",null,null);const le=ie.exports,oe=[{ramp:"Viridis",style:o.sequential,reverse:!0},{ramp:"Plasma",style:o.sequential,reverse:!0},{ramp:"Blues",style:o.sequential},{ramp:"Greens",style:o.sequential},{ramp:"Purples",style:o.sequential},{ramp:"Oranges",style:o.sequential},{ramp:"RdBu",style:o.diverging,reverse:!0},{ramp:"PRGn",style:o.diverging,reverse:!0},{ramp:"Tableau10",style:o.categorical},{ramp:"Paired",style:o.categorical}],ne=p({name:"FillColorsConfig",props:{vizConfiguration:{type:Object,required:!0},datasets:{type:Object,required:!0}},computed:{simpleColors(){return this.buildColors({ramp:"Tableau10",style:o.categorical},10)},colorChoices(){return oe},datasetChoices(){return this.datasetLabels.filter(s=>s!=="csvBase").reverse()}},data:()=>({globalState:_.state,dataColumn:"",datasetLabels:[],diffDatasets:[],diffRelative:!1,diffUISelection:"",diffChoices:[],emitColorSpecification:{},flip:!1,isCurrentlyDiffMode:!1,join:"",normalSelection:"",selectedColor:{},selectedSingleColor:"",steps:"9",useHardCodedColors:!1}),mounted(){var s,e;this.emitColorSpecification=S.debounce(this.emitColorSpecificationDebounced,150),this.selectedSingleColor=this.simpleColors[0],this.selectedColor=this.colorChoices[0],this.datasetLabels=Object.keys(this.vizConfiguration.datasets),this.datasetsAreLoaded(),(e=(s=this.vizConfiguration.display)==null?void 0:s.fill)!=null&&e.fixedColors&&(this.useHardCodedColors=!0),this.vizConfigChanged()},watch:{vizConfiguration(){this.vizConfigChanged()},datasets(){this.datasetsAreLoaded()},diffUISelection(){this.diffSelectionChanged()},dataColumn(){this.emitColorSpecification()},join(){this.emitColorSpecification()},diffDatasets(){this.emitColorSpecification()},flip(){this.emitColorSpecification()},"globalState.isDarkMode"(){this.emitColorSpecification()},normalSelection(){this.emitColorSpecification()},selectedColor(){this.emitColorSpecification()},steps(){this.emitColorSpecification()},diffRelative(){this.emitColorSpecification()}},methods:{vizConfigChanged(){var e;const s=(e=this.vizConfiguration.display)==null?void 0:e.fill;if(this.setupDiffMode(s),s!=null&&s.columnName){const t=this.diffDatasets.length?`${this.diffDatasets[0]}/${s.columnName}`:`${s.dataset}/${s.columnName}`;if(this.dataColumn=t,this.datasetLabels=[...this.datasetLabels],s!=null&&s.normalize&&(this.normalSelection=s.normalize),s!=null&&s.join&&(this.join=s.join),s.colorRamp){let a=this.colorChoices.find(i=>i.ramp==s.colorRamp.ramp)||this.colorChoices[0];this.selectedColor=a,this.steps=s.colorRamp.steps,this.flip=!!s.colorRamp.reverse}}else s!=null&&s.fixedColors&&this.clickedSingleColor(s.fixedColors[0])},setupDiffMode(s){if(!(s!=null&&s.diff))return;let e=[];if(s.diff.indexOf(" - ")>-1)e=s.diff.split(" - ").map(t=>t.trim());else if(e=s.diff.split("-").map(t=>t.trim()),e.length>2)throw Error('Ambiguous diff, use " - " to separate terms');this.diffDatasets=e,this.diffRelative=!!s.relative,this.diffUISelection=`${e[0]} - ${e[1]}`},datasetsAreLoaded(){const s=Object.keys(this.datasets);this.datasetLabels=s,this.updateDiffLabels()},updateDiffLabels(){const s=[];if(s.push(["No",""]),this.datasetLabels.length<=1)return;const e=this.datasetLabels.slice(1);let t=e.flatMap((a,i)=>e.slice(i+1).map(l=>a+" - "+l));t.forEach(a=>s.push([a,a])),e.reverse(),t=e.flatMap((a,i)=>e.slice(i+1).map(l=>a+" - "+l)),t.forEach(a=>s.push([a,a])),this.diffChoices=s},diffSelectionChanged(){if(this.diffUISelection){const s=this.diffUISelection.split(" - ");this.diffDatasets=s}else this.diffDatasets=[],this.diffRelative=!1;this.isCurrentlyDiffMode=!!this.diffUISelection},emitColorSpecificationDebounced(){var r,m,c,u,C,v,b,g;if(!this.dataColumn)return;if(this.dataColumn==="@"){this.normalSelection="",this.selectedSingleColor||(this.selectedSingleColor=this.simpleColors[0]),this.clickedSingleColor(this.selectedSingleColor);return}const s=this.dataColumn.indexOf("/"),e=this.dataColumn.substring(0,s),t=this.dataColumn.substring(s+1),a=parseInt(this.steps),i=this.useHardCodedColors?(m=(r=this.vizConfiguration.display)==null?void 0:r.fill)==null?void 0:m.fixedColors.slice():this.buildColors(this.selectedColor,a);this.useHardCodedColors=!1;const l={dataset:e,columnName:t,join:this.join,fixedColors:i,normalize:this.normalSelection,colorRamp:{ramp:this.selectedColor.ramp,style:this.selectedColor.style,reverse:this.flip,steps:a}};this.diffDatasets.length&&(l.diffDatasets=this.diffDatasets),this.diffRelative&&(l.relative=!0),(C=(u=(c=this.vizConfiguration.display)==null?void 0:c.fill)==null?void 0:u.colorRamp)!=null&&C.breakpoints&&(l.colorRamp.breakpoints=(g=(b=(v=this.vizConfiguration.display)==null?void 0:v.fill)==null?void 0:b.colorRamp)==null?void 0:g.breakpoints),this.$emit("update",{fill:l})},clickedSingleColor(s){this.selectedSingleColor=s;const e={fixedColors:[this.selectedSingleColor],dataset:"",columnName:"",normalize:""};this.$emit("update",{fill:e})},columnsInDataset(s){const e=this.datasets[s];return e?Object.keys(e).filter(a=>e[a].type!==f.LOOKUP):[]},pickColor(s){this.selectedColor=s,this.emitColorSpecification()},buildColors(s,e){let t=[...O(s,e||parseInt(this.steps))],a=!!s.reverse;return this.flip&&(a=!a),a&&(t=t.reverse()),s.style===o.sequential&&this.globalState.isDarkMode&&(t=t.reverse()),t}}});var re=function(){var a;var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"color-ramp-picker"},[t("div",{staticClass:"widgets"},[t("div",{staticClass:"widget"},[t("p",{staticClass:"tight"},[e._v("Display")]),t("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:e.dataColumn,callback:function(i){e.dataColumn=i},expression:"dataColumn"}},[t("option",{attrs:{label:"Single color",value:"@"}}),e._l(e.datasetChoices,function(i){return t("optgroup",{key:i,attrs:{label:i}},e._l(e.columnsInDataset(i),function(l){return t("option",{key:`${i}/${l}`,attrs:{label:l},domProps:{value:`${i}/${l}`}})}),0)})],2)],1)]),e.datasetChoices.length>1?t("div",{staticClass:"widgets"},[t("div",{staticClass:"widget"},[t("p",{staticClass:"tight"},[e._v("Join by")]),t("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:e.join,callback:function(i){e.join=i},expression:"join"}},[t("option",{attrs:{label:"None",value:""}}),t("option",{attrs:{label:"Row count",value:"@count"}}),t("optgroup",{attrs:{label:"Join by..."}},e._l(e.columnsInDataset(((a=e.dataColumn)==null?void 0:a.slice(0,e.dataColumn.indexOf("/")))||[]),function(i){return t("option",{attrs:{label:i},domProps:{value:i}})}),0)])],1)]):e._e(),e.dataColumn&&e.dataColumn.length>1?t("div",{staticClass:"widgets"},[t("div",{staticClass:"widget"},[t("p",{staticClass:"tight"},[e._v("Normalize by")]),t("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:e.normalSelection,callback:function(i){e.normalSelection=i},expression:"normalSelection"}},[t("option",{attrs:{label:"None",value:""}}),e._l(e.datasetChoices,function(i){return t("optgroup",{key:i,attrs:{label:i}},e._l(e.columnsInDataset(i),function(l){return t("option",{key:`${i}/${l}`,attrs:{label:l},domProps:{value:`${i}:${l}`}})}),0)})],2)],1)]):e._e(),t("div",{staticClass:"more",attrs:{title:e.diffChoices.length<2?"Add two datasets to enable comparisons":""}},[t("div",{staticClass:"widgets"},[t("div",{staticClass:"widget",staticStyle:{flex:"3"}},[t("p",{staticClass:"tight"},[e._v("Compare datasets")]),t("b-select",{staticClass:"selector",attrs:{disabled:!e.dataColumn||e.diffChoices.length<2,expanded:""},model:{value:e.diffUISelection,callback:function(i){e.diffUISelection=i},expression:"diffUISelection"}},e._l(e.diffChoices,function(i){return t("option",{attrs:{label:i[0]},domProps:{value:i[1]}})}),0)],1),t("div",{staticClass:"widget"},[t("p",[e._v("%Diff")]),t("b-checkbox",{staticClass:"hello",attrs:{disabled:!e.diffUISelection||!e.dataColumn||e.diffChoices.length<2},model:{value:e.diffRelative,callback:function(i){e.diffRelative=i},expression:"diffRelative"}})],1)])]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.dataColumn=="@",expression:"dataColumn=='@'"}],staticClass:"colorbar single"},e._l(e.simpleColors,function(i){return t("div",{key:i,staticClass:"single-color",class:{active:e.selectedSingleColor==i},style:{backgroundColor:`${i}`},on:{click:function(l){return e.clickedSingleColor(i)}}})}),0),t("div",{directives:[{name:"show",rawName:"v-show",value:e.dataColumn&&e.dataColumn.length>1,expression:"dataColumn && dataColumn.length > 1"}],staticClass:"more"},[t("div",{staticClass:"widgets"},[t("div",{staticClass:"widget",staticStyle:{flex:"3"}},[t("p",[e._v("Steps")]),t("b-input",{attrs:{placeholder:"Number",type:"number",min:"2",max:"15"},model:{value:e.steps,callback:function(i){e.steps=i},expression:"steps"}})],1),t("div",{staticClass:"widget"},[t("p",[e._v("Flip")]),t("b-checkbox",{staticClass:"hello",model:{value:e.flip,callback:function(i){e.flip=i},expression:"flip"}})],1)]),e._l(e.colorChoices,function(i){return t("div",{key:i.ramp,staticClass:"color-ramp",class:{active:i===e.selectedColor},on:{click:function(l){return e.pickColor(i)}}},[t("div",{staticClass:"colorbar"},e._l(e.buildColors(i),function(l,r){return t("div",{key:r,staticClass:"swatch",style:{backgroundColor:`${l}`}},[t("p",[e._v(" ")])])}),0)])})],2)])},de=[];var ce=h(ne,re,de,!1,null,"532b33ec",null,null);const ue=ce.exports,fe=p({name:"FillHeightConfig",props:{vizConfiguration:{type:Object,required:!0},datasets:{type:Object,required:!0}},data:()=>{const s=["none","sqrt","pow5"];return{transforms:s,dataColumn:"",join:"",normalSelection:"",scaleFactor:"1",selectedTransform:s[0],datasetLabels:[],debounceHandleScale:{}}},mounted(){this.datasetLabels=Object.keys(this.vizConfiguration.datasets),this.debounceHandleScale=S.debounce(this.handleScaleChanged,500),this.datasetsAreLoaded(),this.vizConfigChanged()},watch:{vizConfiguration(){this.vizConfigChanged()},datasets(){this.datasetsAreLoaded()},join(){this.emitSpecification()},scaleFactor(){this.debounceHandleScale()},dataColumn(){this.emitSpecification()},normalSelection(){this.emitSpecification()}},computed:{datasetChoices(){return this.datasetLabels.filter(s=>s!=="csvBase").reverse()}},methods:{vizConfigChanged(){var e;const s=(e=this.vizConfiguration.display)==null?void 0:e.fillHeight;s!=null&&s.columnName&&(this.dataColumn=`${s.dataset}/${s.columnName}`,this.datasetLabels=[...this.datasetLabels],this.scaleFactor=s.scaleFactor,this.join=s.join,s!=null&&s.normalize&&(this.normalSelection=s.normalize))},datasetsAreLoaded(){const s=Object.keys(this.datasets);this.datasetLabels=s},handleScaleChanged(){this.emitSpecification()},emitSpecification(){if(!this.dataColumn)return;if(this.dataColumn==="^"){this.normalSelection="";const i={dataset:"",columnName:"",join:this.join,normalize:this.normalSelection,scaleFactor:parseFloat(this.scaleFactor)};setTimeout(()=>this.$emit("update",{fillHeight:i}),25);return}const s=this.dataColumn.indexOf("/"),e=this.dataColumn.substring(0,s),t=this.dataColumn.substring(s+1),a={dataset:e,columnName:t,join:this.join,normalize:this.normalSelection,scaleFactor:parseFloat(this.scaleFactor)};setTimeout(()=>this.$emit("update",{fillHeight:a}),25)},columnsInDataset(s){const e=this.datasets[s];return e?Object.keys(e).filter(a=>e[a].type!==f.LOOKUP):[]},numericColumnsInDataset(s){const e=this.datasets[s];return e?Object.keys(e).filter(a=>e[a].type!==f.LOOKUP):[]}}});var pe=function(){var a;var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"height-panel"},[t("div",{staticClass:"widgets"},[t("div",{staticClass:"widget"},[t("p",{staticClass:"tight"},[e._v("Display")]),t("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:e.dataColumn,callback:function(i){e.dataColumn=i},expression:"dataColumn"}},[t("option",{attrs:{label:"None",value:"^"}}),e._l(e.datasetChoices,function(i){return t("optgroup",{key:i,attrs:{label:i}},e._l(e.numericColumnsInDataset(i),function(l){return t("option",{key:`${i}/${l}`,attrs:{label:l},domProps:{value:`${i}/${l}`}})}),0)})],2)],1)]),e.datasetChoices.length>1?t("div",{staticClass:"widgets"},[t("div",{staticClass:"widget"},[t("p",{staticClass:"tight"},[e._v("Join by")]),t("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:e.join,callback:function(i){e.join=i},expression:"join"}},[t("option",{attrs:{label:"None",value:""}}),t("option",{attrs:{label:"Row count",value:"@count"}}),t("optgroup",{attrs:{label:"Join by..."}},e._l(e.columnsInDataset(((a=e.dataColumn)==null?void 0:a.slice(0,e.dataColumn.indexOf("/")))||[]),function(i){return t("option",{key:i,attrs:{label:i},domProps:{value:i}})}),0)])],1)]):e._e(),e.dataColumn&&e.dataColumn.length>1?t("div",{staticClass:"widgets"},[t("div",{staticClass:"widget"},[t("p",{staticClass:"tight"},[e._v("Normalize by")]),t("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:e.normalSelection,callback:function(i){e.normalSelection=i},expression:"normalSelection"}},[t("option",{attrs:{label:"None",value:""}}),e._l(e.datasetChoices,function(i){return t("optgroup",{key:i,attrs:{label:i}},e._l(e.numericColumnsInDataset(i),function(l){return t("option",{key:`${i}/${l}`,attrs:{label:l},domProps:{value:`${i}:${l}`}})}),0)})],2)],1)]):e._e(),t("div",{staticClass:"widgets"},[t("div",{staticClass:"widget"},[t("p",[e._v("Scaling")]),t("b-field",[t("b-input",{attrs:{disabled:!e.dataColumn,placeholder:"1.0"},model:{value:e.scaleFactor,callback:function(i){e.scaleFactor=i},expression:"scaleFactor"}})],1)],1)])])},he=[];var me=h(fe,pe,he,!1,null,"a845e5a4",null,null);const Ce=me.exports,ve=p({name:"LineWidthsConfig",props:{vizConfiguration:{type:Object,required:!0},datasets:{type:Object,required:!0}},data:()=>({dataColumn:"",scaleFactor:"1",join:"",selectedTransform:["none","sqrt","pow5"][0],datasetLabels:[],diffDatasets:[],diffRelative:!1,diffUISelection:"",diffChoices:[],isCurrentlyDiffMode:!1,debounceHandleScaleChanged:{}}),mounted(){this.debounceHandleScaleChanged=j(this.handleScaleChanged,500),this.datasetsAreLoaded(),this.vizConfigChanged()},watch:{vizConfiguration(){this.vizConfigChanged()},dataColumn(){this.emitSpecification()},diffDatasets(){this.emitSpecification()},diffRelative(){this.emitSpecification()},datasets(){this.datasetsAreLoaded()},diffUISelection(){this.diffSelectionChanged()},scaleFactor(){this.debounceHandleScaleChanged()},join(){this.emitSpecification()}},computed:{datasetChoices(){return this.datasetLabels.filter(s=>s!=="csvBase").reverse()}},methods:{vizConfigChanged(){var e;const s=(e=this.vizConfiguration.display)==null?void 0:e.lineWidth;this.setupDiffMode(s),s!=null&&s.columnName?(this.dataColumn=this.diffDatasets.length?`${this.diffDatasets[0]}/${s.columnName}`:`${s.dataset}/${s.columnName}`,this.datasetLabels=[...this.datasetLabels],this.scaleFactor=s.scaleFactor??"1",this.join=s.join):/^@\d$/.test(s==null?void 0:s.dataset)&&(this.dataColumn=s.dataset)},setupDiffMode(s){if(!(s!=null&&s.diff))return;let e=[];if(s.diff.indexOf(" - ")>-1)e=s.diff.split(" - ").map(t=>t.trim());else if(e=s.diff.split("-").map(t=>t.trim()),e.length>2)throw Error('Ambiguous diff, use " - " to separate terms');this.diffDatasets=e,this.diffRelative=!!s.relative,this.diffUISelection=`${e[0]} - ${e[1]}`},datasetsAreLoaded(){const s=Object.keys(this.datasets);this.datasetLabels=s,this.updateDiffLabels()},updateDiffLabels(){const s=[];if(s.push(["No",""]),this.datasetLabels.length<=1)return;const e=this.datasetLabels.slice(1);let t=e.flatMap((a,i)=>e.slice(i+1).map(l=>a+" - "+l));t.forEach(a=>s.push([a,a])),e.reverse(),t=e.flatMap((a,i)=>e.slice(i+1).map(l=>a+" - "+l)),t.forEach(a=>s.push([a,a])),this.diffChoices=s},diffSelectionChanged(){if(this.diffUISelection){const s=this.diffUISelection.split(" - ");this.diffDatasets=s}else this.diffDatasets=[],this.diffRelative=!1;this.isCurrentlyDiffMode=!!this.diffUISelection},handleScaleChanged(){this.emitSpecification()},emitSpecification(){if(!this.dataColumn)return;const s=this.dataColumn.indexOf("/");if(s===-1){this.clickedSingle();return}const e=this.dataColumn.substring(0,s),t=this.dataColumn.substring(s+1),a={dataset:e,columnName:t,join:this.join,scaleFactor:parseFloat(this.scaleFactor)};this.diffDatasets.length&&(a.diffDatasets=this.diffDatasets),this.diffRelative&&(a.relative=!0),setTimeout(()=>this.$emit("update",{lineWidth:a}),50)},clickedSingle(){const s={dataset:"",columnName:"",scaleFactor:parseFloat(this.scaleFactor)};/^@\d$/.test(this.dataColumn)&&(s.dataset=this.dataColumn),setTimeout(()=>this.$emit("update",{lineWidth:s}),20)},columnsInDataset(s){const e=this.datasets[s];return e?Object.keys(e).filter(a=>e[a].type!==f.LOOKUP):[]},numericColumnsInDataset(s){const e=this.datasets[s];return e?Object.keys(e).filter(a=>e[a].type!==f.LOOKUP):[]}}});var be=function(){var a;var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"width-panel"},[t("div",{staticClass:"widgets"},[t("div",{staticClass:"widget"},[t("p",{staticClass:"tight"},[e._v("Display")]),t("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:e.dataColumn,callback:function(i){e.dataColumn=i},expression:"dataColumn"}},[t("option",{attrs:{label:"None",value:"@0"}}),t("option",{attrs:{label:"1px",value:"@1"}}),t("option",{attrs:{label:"2px",value:"@2"}}),t("option",{attrs:{label:"3px",value:"@3"}}),t("option",{attrs:{label:"5px",value:"@5"}}),t("option",{attrs:{label:"8px",value:"@8"}}),e._l(e.datasetChoices,function(i){return t("optgroup",{key:i,attrs:{label:i}},e._l(e.numericColumnsInDataset(i),function(l){return t("option",{key:`${i}/${l}`,attrs:{label:l},domProps:{value:`${i}/${l}`}})}),0)})],2)],1)]),e.datasetChoices.length>1&&e.dataColumn&&e.dataColumn.length>2?t("div",{staticClass:"widgets"},[t("div",{staticClass:"widget"},[t("p",{staticClass:"tight"},[e._v("Join by")]),t("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:e.join,callback:function(i){e.join=i},expression:"join"}},[t("option",{attrs:{label:"None",value:""}}),t("option",{attrs:{label:"Row count",value:"@count"}}),t("optgroup",{attrs:{label:"Join by..."}},e._l(e.columnsInDataset(((a=e.dataColumn)==null?void 0:a.slice(0,e.dataColumn.indexOf("/")))||[]),function(i){return t("option",{key:i,attrs:{label:i},domProps:{value:i}})}),0)])],1)]):e._e(),e.dataColumn&&e.dataColumn.length>2?t("div",{staticClass:"widgets"},[t("div",{staticClass:"widget"},[t("p",[e._v("Scaling")]),t("b-field",[t("b-input",{attrs:{disabled:!e.dataColumn,placeholder:"1.0"},model:{value:e.scaleFactor,callback:function(i){e.scaleFactor=i},expression:"scaleFactor"}})],1)],1)]):e._e(),t("div",{staticClass:"more",attrs:{title:e.diffChoices.length<2?"Add two datasets to enable comparisons":""}},[t("div",{staticClass:"widgets"},[t("div",{staticClass:"widget",staticStyle:{flex:"3"}},[t("p",{staticClass:"tight"},[e._v("Compare datasets")]),t("b-select",{staticClass:"selector",attrs:{disabled:!e.dataColumn||e.diffChoices.length<2,expanded:""},model:{value:e.diffUISelection,callback:function(i){e.diffUISelection=i},expression:"diffUISelection"}},e._l(e.diffChoices,function(i){return t("option",{attrs:{label:i[0]},domProps:{value:i[1]}})}),0)],1)])])])},ge=[];var ye=h(ve,be,ge,!1,null,"f5e874c7",null,null);const _e=ye.exports,Se=p({name:"LayersConfig",props:{vizConfiguration:{type:Object,required:!0},subfolder:String},data:()=>({helpFileText:`File types supported:
URLs, GeoJSON, Shapefiles.

Note: The browser "Open" dialog does not provide the relative path,
so you may need to add the relative folder location here.`,rawFileData:{}}),mounted(){},computed:{layers(){return Object.keys(this.vizConfiguration.backgroundLayers).map(t=>{const a=this.vizConfiguration.backgroundLayers[t];return a.title=t,JSON.parse(JSON.stringify(a))})}},watch:{},methods:{async openFileDialog(s){const e=await this.loadFile();e.file&&(s.shapes=e.file.name,alert(`Note: If the selected file is not in the current folder:
/${this.subfolder}

then you must manually add the relative path, e.g.
../../${e.file.name}.

This is a browser security limitation.`),this.updateLayers())},loadFile(){return new Promise((s,e)=>{const t=document.createElement("input");t.type="file",t.accept=".geojson, .shp",t.onchange=a=>{const i=a.target.files[0];if(i){const l=new FileReader;l.onload=r=>s({file:i,content:r.target.result}),l.onerror=r=>e(r),l.readAsArrayBuffer(i)}},t.click()})},deleteLayer(s){const e=this.layers[s].title;confirm(`Delete layer "${e}"?`)&&(this.layers.splice(s,1),this.updateLayers())},addLayer(){this.layers.unshift({title:`Layer ${1+this.layers.length}`,shapes:"",fill:"Rainbow",opacity:.5,borderColor:"#fff",borderWidth:3,label:"",visible:!0,onTop:!1}),this.updateLayers()},updateLayers(){setTimeout(()=>{this.$emit("update",{layers:this.layers})},100)},getLayer(s){var e;try{return(e=this.vizConfiguration)==null?void 0:e.backgroundLayers[s]}catch{return}}}});var xe=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"layers-panel"},[t("b-button",{staticClass:"is-small is-warning",on:{click:function(a){return e.addLayer()}}},[e._v("+ Add Layer")]),e._l(e.layers,function(a,i){return t("div",{staticClass:"layer"},[t("div",{staticClass:"delete-button",on:{click:function(l){return e.deleteLayer(i)}}},[e._v("x")]),e._m(0,!0),t("b-input",{attrs:{size:"is-small"},on:{input:e.updateLayers},model:{value:a.title,callback:function(l){e.$set(a,"title",l)},expression:"layer.title"}}),t("div",{staticClass:"xlabel",attrs:{title:e.helpFileText}},[e._v("File / URL ℹ️")]),t("div",{staticClass:"flex-row",staticStyle:{gap:"0.25rem"}},[t("b-input",{staticClass:"flex1",attrs:{size:"is-small"},on:{input:e.updateLayers},model:{value:a.shapes,callback:function(l){e.$set(a,"shapes",l)},expression:"layer.shapes"}}),t("b-button",{staticClass:"is-small",attrs:{title:"Open file..."},on:{click:function(l){return e.openFileDialog(a)}}},[t("i",{staticClass:"fas fa-folder"})])],1),t("div",{staticClass:"flex-row",staticStyle:{gap:"0.25rem"}},[t("div",{staticClass:"flex-col flex1"},[t("div",{staticClass:"xlabel"},[e._v("Fill Color")]),t("b-input",{attrs:{size:"is-small"},on:{input:e.updateLayers},model:{value:a.fill,callback:function(l){e.$set(a,"fill",l)},expression:"layer.fill"}})],1),t("div",{staticClass:"flex-col flex1"},[t("div",{staticClass:"xlabel"},[e._v("Opacity")]),t("b-input",{attrs:{size:"is-small"},on:{input:e.updateLayers},model:{value:a.opacity,callback:function(l){e.$set(a,"opacity",l)},expression:"layer.opacity"}})],1)]),t("div",{staticClass:"xlabel flex-row",staticStyle:{gap:"0.25rem"}},[t("div",{staticClass:"flex-col flex1"},[t("div",{staticClass:"t"},[e._v("Border Color")]),t("b-input",{attrs:{size:"is-small"},on:{input:e.updateLayers},model:{value:a.borderColor,callback:function(l){e.$set(a,"borderColor",l)},expression:"layer.borderColor"}})],1),t("div",{staticClass:"flex-col flex1"},[t("div",{staticClass:"t"},[e._v("Border Width")]),t("b-input",{attrs:{size:"is-small"},on:{input:e.updateLayers},model:{value:a.borderWidth,callback:function(l){e.$set(a,"borderWidth",l)},expression:"layer.borderWidth"}})],1)]),t("div",{staticClass:"xlabel"},[e._v("Label Column")]),t("b-input",{attrs:{size:"is-small"},on:{input:e.updateLayers},model:{value:a.label,callback:function(l){e.$set(a,"label",l)},expression:"layer.label"}}),t("div",{staticClass:"flex-row"},[t("b-checkbox",{staticClass:"flex1 simple-checkbox",on:{input:e.updateLayers},model:{value:a.visible,callback:function(l){e.$set(a,"visible",l)},expression:"layer.visible"}},[e._v("Visible")]),t("b-checkbox",{staticClass:"flex1 simple-checkbox",on:{input:e.updateLayers},model:{value:a.onTop,callback:function(l){e.$set(a,"onTop",l)},expression:"layer.onTop"}},[e._v("On top")])],1)],1)})],2)},ke=[function(){var s=this,e=s._self._c;return s._self._setupProxy,e("div",{staticClass:"xlabel",staticStyle:{"margin-top":"0"}},[e("b",[s._v("Layer Title")])])}];var we=h(Se,xe,ke,!1,null,"a42e7415",null,null);const $e=we.exports,De=p({name:"CircleRadiusConfig",props:{vizConfiguration:{type:Object,required:!0},datasets:{type:Object,required:!0}},data:()=>{const s=["none","sqrt","pow5"];return{transforms:s,dataColumn:"",scaleFactor:"100",selectedTransform:s[0],datasetLabels:[],join:""}},mounted(){this.datasetsAreLoaded(),this.vizConfigChanged()},watch:{vizConfiguration(){this.vizConfigChanged()},datasets(){this.datasetsAreLoaded()},scaleFactor(){this.emitWidthSpecification()},dataColumn(){this.emitWidthSpecification()},join(){this.emitWidthSpecification()}},computed:{datasetChoices(){return this.datasetLabels.filter(s=>s!=="csvBase").reverse()}},methods:{vizConfigChanged(){var e;const s=(e=this.vizConfiguration.display)==null?void 0:e.radius;if(s!=null&&s.columnName){const t=`${s.dataset}/${s.columnName}`;this.dataColumn=t,this.datasetLabels=[...this.datasetLabels],this.scaleFactor=s.scaleFactor,this.join=s.join??""}},datasetsAreLoaded(){const s=Object.keys(this.datasets);this.datasetLabels=s},emitWidthSpecification(){if(!this.dataColumn)return;if(this.dataColumn=="@"){const i={columnName:"",scaleFactor:parseFloat(this.scaleFactor),join:this.join};setTimeout(()=>this.$emit("update",{radius:i}),50);return}const s=this.dataColumn.indexOf("/"),e=this.dataColumn.substring(0,s),t=this.dataColumn.substring(s+1),a={dataset:e,columnName:t,scaleFactor:parseFloat(this.scaleFactor),join:this.join};setTimeout(()=>this.$emit("update",{radius:a}),50)},columnsInDataset(s){const e=this.datasets[s];return e?Object.keys(e).filter(a=>e[a].type!==f.LOOKUP):[]},numericColumnsInDataset(s){const e=this.datasets[s];return e?Object.keys(e).filter(a=>e[a].type!==f.LOOKUP):[]}}});var Le=function(){var a;var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"width-panel"},[t("div",{staticClass:"widgets"},[t("div",{staticClass:"widget"},[t("p",{staticClass:"tight"},[e._v("Display")]),t("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:e.dataColumn,callback:function(i){e.dataColumn=i},expression:"dataColumn"}},[t("option",{attrs:{label:"None",value:"@"}}),e._l(e.datasetChoices,function(i){return t("optgroup",{key:i,attrs:{label:i}},e._l(e.numericColumnsInDataset(i),function(l){return t("option",{attrs:{label:l},domProps:{value:`${i}/${l}`}})}),0)})],2)],1)]),e.datasetChoices.length>1?t("div",{staticClass:"widgets"},[t("div",{staticClass:"widget"},[t("p",{staticClass:"tight"},[e._v("Join by")]),t("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:e.join,callback:function(i){e.join=i},expression:"join"}},[t("option",{attrs:{label:"None",value:""}}),t("option",{attrs:{label:"Row count",value:"@count"}}),t("optgroup",{attrs:{label:"Join by..."}},e._l(e.columnsInDataset(((a=e.dataColumn)==null?void 0:a.slice(0,e.dataColumn.indexOf("/")))||[]),function(i){return t("option",{key:i,attrs:{label:i},domProps:{value:i}})}),0)])],1)]):e._e(),t("div",{staticClass:"widgets"},[t("div",{staticClass:"widget"},[t("p",[e._v("Scaling")]),t("b-field",[t("b-input",{attrs:{disabled:!e.dataColumn,placeholder:"1.0"},model:{value:e.scaleFactor,callback:function(i){e.scaleFactor=i},expression:"scaleFactor"}})],1)],1)])])},Oe=[];var je=h(De,Le,Oe,!1,null,"58b1c77a",null,null);const ze=je.exports,Fe=p({props:{vizConfiguration:{type:Object,required:!0},datasets:{type:Object,required:!0}},data:()=>{const s=["Categories","==","!=","<=",">=","<",">"];return{OPERATORS:s,filters:{},addDataColumn:null,addOperator:s[0],addValue:"",datasetLabels:[]}},mounted(){this.datasetsAreLoaded(),this.vizConfigChanged()},watch:{filters(){this.emitSpecification()},vizConfiguration(){this.vizConfigChanged()},datasets(){this.datasetsAreLoaded()}},computed:{filterIds(){return Object.keys(this.filters)},datasetChoices(){return this.datasetLabels.filter(s=>s!=="XcsvBase").reverse()}},methods:{eraseFields(){this.addDataColumn=null,this.addOperator=this.OPERATORS[0],this.addValue=""},clickedCancel(){this.eraseFields()},clickedAddFilter(){let[s,e]=this.addDataColumn?this.addDataColumn.split("@"):["",""];this.datasetLabels.indexOf(s)<1&&(s="shapes"),this.addOperator===this.OPERATORS[0]&&(this.addValue="");const t={dataset:s,column:e,operator:this.addOperator,value:this.addValue};this.filters[`${s}.${e}`]=t,this.filters=Object.assign({},this.filters),this.eraseFields()},clickedRemoveFilter(s){delete this.filters[s],this.filters=Object.assign({},this.filters)},vizConfigChanged(){if(this.filters={},!this.vizConfiguration.filters)return;let s=JSON.parse(JSON.stringify(this.vizConfiguration.filters));if(Array.isArray(s)){const e={};s.forEach(t=>Object.assign(e,t)),s=e}for(const e of Object.keys(s)){const[t,a]=e.split(".");if(a==null){this.$emit("error",`Filter key is not "dataset.column": ${e}`);continue}const i={dataset:t,column:a,operator:"",value:s[e]};i.value===this.OPERATORS[0]&&(i.column=i.column.substring(0,i.column.length-1),i.operator=this.OPERATORS[0]),a.endsWith("!")&&(i.column=i.column.substring(0,i.column.length-1),i.operator="!=");for(const l of["<=",">=","<",">"])if(typeof i.value=="string"&&i.value.startsWith(l)){i.value=i.value.substring(l.length).trim(),i.operator=l;break}this.filters[`${i.dataset}.${i.column}`]=i}this.datasetLabels=[...this.datasetLabels]},datasetsAreLoaded(){const s=Object.keys(this.datasets);this.datasetLabels=s},emitSpecification(){const s={};for(const e of Object.keys(this.filters)){const t=Object.assign({},this.filters[e]);let a=`${t.dataset}.${t.column}`;t.operator==="!="&&(a+="!"),t.operator===this.OPERATORS[0]&&(t.value="@categorical"),(t.operator.startsWith("<")||t.operator.startsWith(">"))&&(t.value=`${t.operator} ${t.value}`),s[a]=t.value}setTimeout(()=>this.$emit("update",{filters:s}),25)},numericColumnsInDataset(s){const e=this.datasets[s];return e?Object.keys(e).filter(a=>e[a].type!==f.LOOKUP):[]}}});var Re=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"width-panel"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.filterIds.length,expression:"filterIds.length"}],staticClass:"widgets"},[t("div",{staticClass:"widget"},[t("h4",[e._v("Active Filters")]),t("div",{staticClass:"filter-items"},e._l(e.filterIds,function(a){return t("div",{key:a,staticClass:"active-filter filter-details"},[t("p",{staticClass:"stretch"},[t("b",[e._v(e._s(e.filters[a].dataset)+": ")]),e.filters[a].operator==e.OPERATORS[0]?t("span",[e._v("by ")]):e._e(),e._v(e._s(`${e.filters[a].column}`)),e.filters[a].operator!==e.OPERATORS[0]?t("span",[e._v(" "+e._s(`${e.filters[a].operator} ${e.filters[a].value}`))]):e._e()]),t("div",{staticClass:"span close-button",on:{click:function(i){return e.clickedRemoveFilter(a)}}},[e._v("×")])])}),0)])]),t("div",{staticClass:"widgets"},[t("div",{staticClass:"widget boop"},[t("h4",[e._v("Add New Filter")]),t("b-select",{staticClass:"tight selector",attrs:{expanded:"",placeholder:"Select..."},model:{value:e.addDataColumn,callback:function(a){e.addDataColumn=a},expression:"addDataColumn"}},e._l(e.datasetChoices,function(a){return t("optgroup",{key:a,attrs:{label:a}},e._l(e.numericColumnsInDataset(a),function(i){return t("option",{attrs:{label:i},domProps:{value:`${a}@${i}`}})}),0)}),0),e.addDataColumn?t("div",{staticClass:"filter-details2"},[t("b-select",{staticClass:"operator",attrs:{expanded:""},model:{value:e.addOperator,callback:function(a){e.addOperator=a},expression:"addOperator"}},e._l(e.OPERATORS,function(a){return t("option",{attrs:{label:a},domProps:{value:a}})}),0),e.addOperator!==e.OPERATORS[0]?t("b-field",[t("b-input",{attrs:{placeholder:"1.0"},model:{value:e.addValue,callback:function(a){e.addValue=a},expression:"addValue"}})],1):e._e()],1):e._e(),e.addDataColumn?t("div",{staticClass:"button-bar"},[t("button",{staticClass:"button add-button is-small is-inverted",on:{click:e.clickedCancel}},[e._v("Cancel")]),e.addDataColumn?t("button",{staticClass:"button add-button is-small is-primary",attrs:{disabled:e.addOperator!==e.OPERATORS[0]&&e.addValue===""},on:{click:e.clickedAddFilter}},[e._v("  Add  ")]):e._e()]):e._e()],1)])])},Pe=[];var Ae=h(Fe,Re,Pe,!1,null,"3d1e0de6",null,null);const Ie=Ae.exports,Ne=p({name:"VizConfigurator",components:{AddDatasetsPanel:M,CircleRadiusPanel:ze,ColorPanel:K,WidthPanel:Q,FillColorPanel:ue,FillHeightPanel:Ce,LegendBox:T,LineColorPanel:le,LineWidthPanel:_e,FiltersPanel:Ie,LayersPanel:$e},props:{vizDetails:{type:Object,required:!0},datasets:{type:Object,required:!0},fileSystem:{type:Object,required:!0},subfolder:{type:String,required:!0},yamlConfig:{type:String},legendStore:{type:Object,required:!0},filterDefinitions:{type:Object,required:!0},sections:{type:Array},embedded:Boolean},data:()=>({showPanels:!1,showLegend:!0,activeSection:"",showAddDatasets:!1,selectedExportAction:"",layer:{general:{type:"links",dataset:"network.geojson",columns:{}},display:{lineColor:{},color:{},lineWidth:{},radius:{},fill:{},label:{},fillHeight:{}}}}),mounted(){this.activeSection=this.sections?this.sections[0]:"color",this.embedded&&(this.showLegend=!0)},computed:{vizConfiguration(){return{datasets:this.vizDetails.datasets,display:this.vizDetails.display,filters:this.vizDetails.filters,backgroundLayers:this.vizDetails.backgroundLayers||{}}},fidgetSections(){return Object.keys(this.layer.display)}},methods:{getSections(){return this.sections?this.sections.map(s=>({component:F.startCase(s.replaceAll("-"," ")).replaceAll(" ","")+"Panel",name:s.replaceAll("-"," ")})):[{component:"ColorPanel",name:"color"},{component:"WidthPanel",name:"width"}]},clickedShowHide(){this.showPanels=!this.showPanels},clickedLegendShowHide(){this.$emit("toggleLegend"),this.showLegend=!this.showLegend},clickedSection(s){s===this.activeSection?this.activeSection="":this.activeSection=s},async handleConfigChanged(s){this.showAddDatasets=!1,await this.$nextTick(),this.$emit("update",s)},clickedAddData(){this.showAddDatasets=!0},async clickedExport(){await this.$nextTick(),this.selectedExportAction=="yaml"?this.exportYaml():this.selectedExportAction=="png"&&this.$emit("screenshot"),this.selectedExportAction=""},exportYaml(){var m,c,u,C,v,b,g,x,k,w,$;let s="viz-viztype-config.yaml";const e=((m=this.yamlConfig)==null?void 0:m.toLocaleLowerCase())||"";(e.endsWith("yaml")||e.endsWith("yml"))&&(s=this.yamlConfig||"viz-viztype-config.yaml"),e.endsWith("shp")&&(s=`viz-map-${e}.yaml`);const t=prompt("Export filename:",s);if(!t)return;const a={title:this.vizDetails.title,description:this.vizDetails.description,zoom:Math.round(10*this.$store.state.viewState.zoom)/10,pitch:Math.round(this.$store.state.viewState.pitch),bearing:Math.round(this.$store.state.viewState.bearing),center:[Math.round(100*this.$store.state.viewState.center[0])/100,Math.round(100*this.$store.state.viewState.center[1])/100],network:this.vizDetails.network||this.vizDetails.geojsonFile,projection:this.vizDetails.projection,showDifferences:this.vizDetails.showDifferences,sampleRate:this.vizDetails.sampleRate,shapes:((c=this.vizDetails.shapes)==null?void 0:c.file)||this.vizDetails.shapes,datasets:{...this.vizDetails.datasets},display:{...this.vizDetails.display},filters:{},backgroundLayers:this.vizDetails.backgroundLayers||{}};for(const d of Object.keys(a.backgroundLayers)){const n=a.backgroundLayers[d];delete n.title,n.label===""&&delete n.label}typeof this.vizDetails.shapes=="object"&&this.vizDetails.shapes.join&&(a.shapes={file:a.shapes,join:this.vizDetails.shapes.join}),this.$store.state.viewState.bearing||delete a.bearing,this.$store.state.viewState.pitch||delete a.pitch;const i=typeof a.shapes=="string"?(u=a==null?void 0:a.shapes)==null?void 0:u.substring(1+a.shapes.lastIndexOf("/")):(v=(C=a==null?void 0:a.shapes)==null?void 0:C.file)==null?void 0:v.substring(1+a.shapes.file.lastIndexOf("/")||0);a.datasets[i]&&delete a.datasets[i];for(const d of Object.keys(a))a[d]||delete a[d];a.display.color&&((g=(b=a.display.color)==null?void 0:b.colorRamp)==null||delete g.style,(x=a.display.color)==null||delete x.fixedColors),a.display.fill&&(a.display.fill.colorRamp?((k=a.display.fill.colorRamp)==null||delete k.style,delete a.display.fill.fixedColors,a.display.fill.colorRamp.reverse||delete a.display.fill.colorRamp.reverse):(delete a.display.fill.filters,delete a.display.fill.dataset,delete a.display.fill.columnName)),a.display.lineColor&&(console.log(555,a.display.lineColor),a.display.lineColor.fixedColors&&a.display.lineColor.fixedColors[0]===""?a.display.lineColor=!1:a.display.lineColor.colorRamp?((w=a.display.lineColor.colorRamp)==null||delete w.style,delete a.display.lineColor.fixedColors,a.display.lineColor.colorRamp.reverse||delete a.display.lineColor.colorRamp.reverse):(delete a.display.lineColor.dataset,delete a.display.lineColor.columnName));for(const d of["fill","lineColor","lineWidth"]){const n=a.display[d];if(n&&(n.normalize||delete n.normalize,n.relative||delete n.relative,n.diffDatasets)){n.diff=`${n.diffDatasets[0]} - ${n.diffDatasets[1]}`,delete n.dataset,delete n.diffDatasets;const D={diff:n.diff,columnName:n.columnName};n.relative&&(D.relative=!0),a.display[d]=Object.assign(D,n)}}if(a.datasets)for(const[d,n]of Object.entries(a.datasets))typeof n.file=="object"&&(a.datasets[d].file=(($=n.file)==null?void 0:$.name)||n.file||d),typeof n=="object"&&(delete a.datasets[d].join,Object.keys(a.datasets[d]).length==1&&a.datasets[d].file&&(a.datasets[d]=a.datasets[d].file));for(const d of Object.entries(a.display))d[1]!==!1&&(Object.keys(d[1]).length||delete a.display[d[0]]);Object.keys(this.filterDefinitions).length?a.filters=Object.assign({},this.filterDefinitions):delete a.filters;const l=z.stringify(a,{indent:4,simpleKeys:!0});var r=document.createElement("a");r.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(l)),r.setAttribute("download",t),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}}});var Te=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"viz-configurator"},[t("div",{staticClass:"map-actions"},[t("button",{directives:[{name:"show",rawName:"v-show",value:!e.embedded,expression:"!embedded"}],staticClass:"button draw-button is-tiny",class:{"is-showing":e.showPanels},attrs:{title:"Config"},on:{click:e.clickedShowHide}},[t("i",{staticClass:"fa fa-sliders-h settings-icon"})]),t("button",{staticClass:"button draw-button is-tiny",class:{"is-showing":e.showLegend},attrs:{title:"Legend"},on:{click:e.clickedLegendShowHide}},[t("i",{staticClass:"fa fa-info settings-icon"})])]),t("div",{staticClass:"right-panels"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.showPanels&&!e.showAddDatasets,expression:"showPanels && !showAddDatasets"}],staticClass:"configuration-panels"},[t("div",{staticClass:"section-panel"},[t("div",{staticClass:"actions"},[t("b-dropdown",{attrs:{"aria-role":"list",position:"is-bottom-left","close-on-click":!0},on:{change:e.clickedExport},scopedSlots:e._u([{key:"trigger",fn:function({active:a}){return[t("b-button",{staticClass:"is-small is-white export-button"},[t("i",{staticClass:"fa fa-sm fa-share"}),e._v(" Export")])]}}]),model:{value:e.selectedExportAction,callback:function(a){e.selectedExportAction=a},expression:"selectedExportAction"}},[t("b-dropdown-item",{attrs:{value:"yaml","aria-role":"listitem"}},[e._v("Save YAML config")]),t("b-dropdown-item",{attrs:{value:"png","aria-role":"listitem"}},[e._v("Take screenshot")])],1),t("b-button",{staticClass:"is-small is-white export-button",on:{click:e.clickedAddData}},[t("i",{staticClass:"fa fa-sm fa-plus"}),e._v(" Add Data")])],1)]),e._l(e.getSections(),function(a){return t("div",{key:a.name,staticClass:"section-panel"},[t("h1",{class:{h1active:a.name===e.activeSection},on:{click:function(i){return e.clickedSection(a.name)}}},[e._v(e._s(a.name))]),t("div",{directives:[{name:"show",rawName:"v-show",value:a.name===e.activeSection,expression:"section.name===activeSection"}],staticClass:"symbology-panel",class:{active:a.name===e.activeSection}},[a.component?t(a.component,{tag:"component",attrs:{vizConfiguration:e.vizConfiguration,datasets:e.datasets,subfolder:e.subfolder},on:{update:e.handleConfigChanged}}):t("p",[e._v("To be added")])],1)])})],2)]),e.showAddDatasets?t("add-datasets-panel",{attrs:{vizConfiguration:e.vizConfiguration,fileSystem:e.fileSystem,subfolder:e.subfolder},on:{update:e.handleConfigChanged}}):e._e()],1)},Ue=[];var qe=h(Ne,Te,Ue,!1,null,"3278118a",null,null);const Xe=qe.exports;export{Xe as V};
//# sourceMappingURL=VizConfigurator-95c9391d.js.map
